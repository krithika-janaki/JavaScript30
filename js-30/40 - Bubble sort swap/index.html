<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .container {
            display: flex;
    flex-direction: row;
    align-items: center;
    height: 100vh;
        }

        .grid {
            width: 30%;
            transform: 30px;
            border: solid 1px black;
        }

        .goYellow {
            background-color: yellow;
        }

        .barChart {
            width: 40px;
            height: 60px;
            background-color: blue;
        }
        .ani {
            animation: height-ani 3s;
            animation-delay: 0;
            animation-iteration-count: 1;
        }

        @keyframes height-ani {
            from {
                height: 60px;
            }
            to {
                height: 120px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
    </div>
    <div class="barChart"></div>
    <script>
        const barr = document.querySelector('.barChart');

        function handleClick() {
            barr.classList.add('ani');
        }
        barr.addEventListener('click', handleClick);
        const temp = document.querySelector('.container');
        let arr = [18, 8, 9, 1, 3];
        arr.forEach((ele, i) => {
            const html = `<div class='grid'>${ele}</div>`;
            temp.innerHTML += html;
        });
        const elements = document.querySelectorAll('.grid');
        let l = arr.length;
        let p1 = 0;
        let p2=1;


        function swap(p1, p2) {
            return new Promise((resolve) => {
                let temp = elements[p1].style.transform;
    
                elements[p1].transform = elements[p2].textContent;

                elements[p2].textContent = temp;
                    
                window.requestAnimationFrame(() => {
                    setTimeout(() => {
                        elements[p1].parentElement.insertBefore(elements[p1], elements[p2]);
                        resolve();
                    }, 2000)
                    
                });
            });

        };

        async function bubbb() {
            for (let i=0; i < arr.length; i++){
            for (j =0; j < arr.length - i - 1; j++) {
                elements[j].classList.add('goYellow');
                elements[j+1].classList.add('goYellow');
                await new Promise((resolve) => {
                    setTimeout(() => {
                        resolve();
                    }, 3000);
                });

                if(arr[j] > arr[j+1]) {
                    await swap(p1, p2);
                }
                elements[j].classList.remove('goYellow');
                elements[j+1].classList.remove('goYellow');
            }
            elements[arr.length - i - 1].style.backgroundColor = 'green';
        }

        };

       

        // function swap(p1, p1) {
        //     return new Promise((resolve) => {

        //     })
        //     let temp = arr[p1];
        //             arr[p1] = arr[p2]
        //             arr[p2] = temp;
                    


        // }



        // async function bubbleSort(delay = 3000) {
        //     while(l > 0) {
            
        //     while (p2< l) {
        //         elements[p1].classList.add('goYellow');
        //         elements[p2].classList.add('goYellow');
        //         await new Promise((resolve, reject) => {
        //             setTimeout(() => {
        //                 resolve();
        //             }, 3000);
        //         });

        //         if(arr[p1] > arr[p2]) {
        //             await swap(p1, p2);
                    
        //         }
        //         elements[p1].classList.remove('goYellow');
        //         elements[p2].classList.remove('goYellow');
        //         p1++;
        //         p2++;

        //     }
        //     l = l - 1;
        //     p1 = 0;
        //     p2 = 1;
        // }

        // }

        bubbb();
        console.log('arr', arr);

    </script>
</body>
</html>